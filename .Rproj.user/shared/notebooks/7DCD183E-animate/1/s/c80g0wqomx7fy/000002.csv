"0","library(sf)"
"0","library(dplyr)"
"0","library(readr)"
"0","##### Extract zipcode from TOWN_zip.kml in order to combine to shp ####"
"0","# the extracted df is saved to ./spatial_data/zipcode_towncode.csv #"
"0","# zip <- st_read(""./shape/TOWN_zip.kml"")[,c(""TOWNCODE"",""ZIPCODE"", ""COUNTYNAME"",""TOWNNAME"")] %>% st_set_geometry(NULL) %>% arrange(ZIPCODE)"
"0","# write_csv(zip, ""./spatial_data/zipcode_towncode.csv"")"
"0","zip <- read_csv(""spatial_data/zipcode_towncode.csv"", "
"0","    col_types = cols(ZIPCODE = col_character()))[,2:4]"
"0","sp <- st_read(""./shape/TOWN_MOI_1070330.shp"")"
"1","Reading layer `"
"1","TOWN_MOI_1070330"
"1","' from data source `"
"1","/home/liao/local_depend/GitHubPage/lang_social_survey/shape/TOWN_MOI_1070330.shp"
"1","' using driver `"
"1","ESRI Shapefile"
"1","'"
"1","
"
"1","Simple feature collection with 368 features and 7 fields"
"1","
"
"1","geometry type:  MULTIPOLYGON
"
"1","dimension:      XY
"
"1","bbox:           "
"1","xmin: 118.138 ymin: 21.8956 xmax: 124.5611 ymax: 26.38528"
"1","
"
"1","epsg (SRID):    NA
"
"1","proj4string:    +proj=longlat +ellps=GRS80 +no_defs
"
"0","sp <- sp %>% "
"0","    left_join(zip, by = c(""COUNTYNAME"",""TOWNNAME"")) %>%"
"0","    select(COUNTYNAME, TOWNNAME, ZIPCODE)"
